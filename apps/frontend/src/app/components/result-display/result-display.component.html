<div class="result-container">

  <!-- Estado de erro -->
  @if (error && !loading) {
    <div class="error-message">
      <div class="error-icon">âŒ</div>
      <h3>Ocorreu um erro</h3>
      <p>{{ error }}</p>
      <p>Tente novamente mais tarde.</p>
    </div>
  }

  <!-- Resultado da anÃ¡lise -->
  @if (analysis && !loading && !error) {
    <div class="result-header">
      <h2>ğŸ“Š Resultado da AnÃ¡lise</h2>
      <div class="category-display">
        <span [class]="'category-badge ' + categoryClass">
          {{ analysis.category }}
        </span>
        <span class="confidence-score" [style.color]="confidenceColor">
          {{ (analysis.confidence * 100).toFixed(1) }}% de confianÃ§a
        </span>
      </div>
    </div>

    <div class="result-sections">
      <!-- Resposta sugerida -->
      <div class="result-section">
        <h3 class="section-title">
          <span>ğŸ’¡</span> Resposta Sugerida
        </h3>
        <div class="suggested-response">
          <button
            class="copy-btn"
            (click)="copyToClipboard(analysis.suggested_response)"
            title="Copiar para a Ã¡rea de transferÃªncia"
          >
            ğŸ“‹ Copiar
          </button>
          {{ analysis.suggested_response }}
        </div>
      </div>

      <!-- VisualizaÃ§Ã£o do texto original -->
      <div class="result-section">
        <h3 class="section-title">
          <span>ğŸ“„</span> VisualizaÃ§Ã£o do Texto
        </h3>
        <div class="preview-text">
          {{ analysis.original_text_preview }}
        </div>
      </div>

      <!-- Medidor de confianÃ§a -->
      <div class="result-section">
        <h3 class="section-title">
          <span>ğŸ“ˆ</span> NÃ­vel de ConfianÃ§a
        </h3>
        <div class="confidence-meter">
          <div class="confidence-label">
            <span>Baixa</span>
            <span>Alta</span>
          </div>
          <div class="confidence-bar">
            <div
              class="confidence-fill"
              [style.width]="(analysis.confidence * 100) + '%'"
              [style.background]="confidenceColor"
            ></div>
          </div>
          <p class="confidence-explanation">
            A confianÃ§a indica a certeza do sistema na classificaÃ§Ã£o.
            Valores acima de 80% sÃ£o considerados altamente confiÃ¡veis.
          </p>
        </div>
      </div>
    </div>
  }

  <!-- Estado vazio (sem anÃ¡lise) -->
  @if (!analysis && !loading && !error) {
    <div class="empty-state">
      <div class="empty-icon">ğŸ“­</div>
      <h3>Nenhuma anÃ¡lise realizada</h3>
      <p>Envie um email para ver os resultados aqui.</p>
    </div>
  }
</div>